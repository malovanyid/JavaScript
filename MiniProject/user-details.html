<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>^-_-^</title>
  <style>
    .user-details {
      width: 90%;
      margin: 20px auto;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 20px;
      box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
      background-color: #f9f9f9;
    }

    .posts-container {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }

    .post-card {
      width: 18%;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 10px;
      padding: 10px;
      box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
      background-color: #f9f9f9;
    }

    .post-card a {
      display: inline-block;
      margin-top: 10px;
      padding: 5px 10px;
      background-color: #007BFF;
      color: white;
      text-decoration: none;
      border-radius: 3px;
      text-align: center;
    }

    .post-card a:hover {
      background-color: #0056b3;
    }

    .load-posts-btn {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      background-color: #FF3C00F7;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      cursor: pointer;
      text-align: center;
    }

    .load-posts-btn:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>
<div class="user-details" id="user-details"></div>
<button id="load-posts-btn" class="load-posts-btn">Post of current user</button>
<div class="posts-container" id="posts-container"></div>

<script>
  function getQueryParams() {
    const params = new URLSearchParams(window.location.search);
    return Object.fromEntries(params.entries());
  }

  function displayUserDetails(user) {
    const userDetailsContainer = document.getElementById('user-details');
    userDetailsContainer.innerHTML = `
                <p><strong>ID:</strong> ${user.id}</p>
                <p><strong>Name:</strong> ${user.name}</p>
                <p><strong>Username:</strong> ${user.username}</p>
                <p><strong>Email:</strong> ${user.email}</p>
                <p><strong>Address:</strong> ${user.address.street}, ${user.address.city}</p>
                <p><strong>Phone:</strong> ${user.phone}</p>
                <p><strong>Website:</strong> ${user.website}</p>
                <p><strong>Company:</strong> ${user.company.name}</p>
            `;
  }

  function loadUserPosts(userId) {
    fetch(`https://jsonplaceholder.typicode.com/users/${userId}/posts`)
            .then(response => response.json())
            .then(posts => {
              const postsContainer = document.getElementById('posts-container');
              postsContainer.innerHTML = '';

              posts.forEach(post => {
                const postCard = document.createElement('div');
                postCard.className = 'post-card';
                postCard.innerHTML = `
                            <h3>${post.title}</h3>
                            <a href="post-details.html?postId=${post.id}">View Post Details</a>
                        `;
                postsContainer.appendChild(postCard);
              });
            })
            .catch(error => console.error('Error fetching posts:', error));
  }

  const queryParams = getQueryParams();
  const userId = queryParams.id;

  if (userId) {
    fetch(`https://jsonplaceholder.typicode.com/users/${userId}`)
            .then(response => response.json())
            .then(user => {
              displayUserDetails(user);
              document.getElementById('load-posts-btn').addEventListener('click', () => {
                loadUserPosts(userId);
              });
            })
            .catch(error => console.error('Error fetching user details:', error));
  } else {
    document.getElementById('user-details').innerText = 'User ID is missing in the URL';
  }
</script>
</body>
</html>